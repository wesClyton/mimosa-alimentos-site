---
import { MENU_ITEMS } from '@utils/menu.contants';
import Address from './Address.astro';
import Sac from './Sac.astro';
import Social from './Social.astro';
---

<footer class="flex justify-center bg-red-800 px-5 py-10 text-base text-white lg:py-25">
  <div class="container flex w-full flex-col gap-y-16 lg:flex-row lg:flex-wrap lg:justify-between">
    <section class="relative z-10 flex flex-row justify-center gap-10 text-sm font-bold uppercase lg:flex-initial">
      <ul class="flex flex-col gap-5">
        <li>
          <a class="hover:text-yellow-300" href={MENU_ITEMS.home.href}>{MENU_ITEMS.home.label}</a>
        </li>
        <li>
          <a class="hover:text-yellow-300" href={MENU_ITEMS.institucional.href}>{MENU_ITEMS.institucional.label}</a>
        </li>
        <li>
          <a class="hover:text-yellow-300" href={MENU_ITEMS.produtos.href}>{MENU_ITEMS.produtos.label}</a>
        </li>
        <li>
          <a class="hover:text-yellow-300" href={MENU_ITEMS.trabalheConosco.href}>{MENU_ITEMS.trabalheConosco.label}</a>
        </li>
      </ul>

      <ul class="flex flex-col gap-5">
        <li>
          <a class="hover:text-yellow-300" href={MENU_ITEMS.downloads.href}>{MENU_ITEMS.downloads.label}</a>
        </li>
        <li>
          <a class="hover:text-yellow-300" href={MENU_ITEMS.ondeEncontrar.href}>{MENU_ITEMS.ondeEncontrar.label}</a>
        </li>
        <li>
          <a class="hover:text-yellow-300" href={MENU_ITEMS.sejaUmCliente.href}>{MENU_ITEMS.sejaUmCliente.label}</a>
        </li>
        <li><a class="hover:text-yellow-300" href={MENU_ITEMS.contato.href}>{MENU_ITEMS.contato.label}</a></li>
      </ul>
    </section>

    <section class="lg:flex-initial">
      <Address inFooter={true} />
    </section>

    <section class="lg:flex-initial">
      <Sac inFooter={true} />
    </section>

    <section class="flex flex-auto flex-col items-center lg:flex-initial">
      <a href="/">
        <img class="mb-5 w-38" src="/logo-mimosa-white.svg" alt="Logo Mimosa Alimentos" />
      </a>
      <Social iconColor="red" iconWithBackground={true} />
    </section>
  </div>
</footer>

<button
  id="toTopButton"
  class="fixed right-5 bottom-5 z-50 flex h-12 w-12 cursor-pointer items-center justify-center rounded-full bg-red-800 text-white opacity-0 shadow-lg transition-all duration-300 hover:bg-red-900"
  aria-label="Voltar ao topo"
>
  <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path>
  </svg>
</button>

<script is:inline>
  document.addEventListener('DOMContentLoaded', function () {
    const toTopButton = document.getElementById('toTopButton');
    const header = document.querySelector('header');

    let lastScrollTop = 0;
    let scrollTimeout;

    window.addEventListener('scroll', function () {
      clearTimeout(scrollTimeout);

      if (window.scrollY > 300) {
        toTopButton.classList.add('opacity-100');
        toTopButton.classList.remove('opacity-0');
      } else {
        toTopButton.classList.add('opacity-0');
        toTopButton.classList.remove('opacity-100');
      }

      const currentScroll = window.scrollY;

      if (currentScroll > lastScrollTop && currentScroll > 100) {
        header.classList.add('translate-y-[-100%]');
      } else {
        header.classList.remove('translate-y-[-100%]');
      }

      lastScrollTop = currentScroll;

      scrollTimeout = setTimeout(() => {
        header.classList.remove('translate-y-[-100%]');
      }, 1000);
    });

    toTopButton.addEventListener('click', function () {
      window.scrollTo({
        top: 0,
        behavior: 'smooth',
      });
    });
  });
</script>
